```markdown
# ü©∫ Skin Rash Analyzer Service

–¢–µ—Å—Ç–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ –ê—Ä—Ç—É—Ä–∞ –ì—Ä–æ–º–µ–Ω–∫–æ–≤–∞ - —Å–µ—Ä–≤–∏—Å –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∫–æ–∂–Ω—ã—Ö –≤—ã—Å—ã–ø–∞–Ω–∏–π —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–Ω–æ–≥–æ –∑—Ä–µ–Ω–∏—è –∏ —è–∑—ã–∫–æ–≤—ã—Ö –º–æ–¥–µ–ª–µ–π.

## ‚ö° –í–∞–∂–Ω—ã–µ –ø—Ä–∏–º–µ—á–∞–Ω–∏—è

> **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç —Å–∫–æ—Ä–æ—Å—Ç–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏** –ø—Ä–∏–≤–µ–ª –∫ —Å–ª–µ–¥—É—é—â–∏–º –∫–æ–º–ø—Ä–æ–º–∏—Å—Å–∞–º:
> - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `print` –≤–º–µ—Å—Ç–æ —Å–∏—Å—Ç–µ–º—ã –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
> - –õ–æ–∫–∞–ª—å–Ω–∞—è LLM —á–µ—Ä–µ–∑ KoboldCpp –≤–º–µ—Å—Ç–æ –æ–±–ª–∞—á–Ω—ã—Ö API
> - –ë–∞–∑–æ–≤—ã–µ —Ç–µ—Å—Ç—ã –≤–º–µ—Å—Ç–æ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã—Ö —é–Ω–∏—Ç-—Ç–µ—Å—Ç–æ–≤
> - –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

## üß† –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –º–æ–¥–µ–ª–∏

### Vision Model
- **CLIP**: `zer0int/LongCLIP-GmP-ViT-L-14`
- –í—ã–±–æ—Ä –æ–±–æ—Å–Ω–æ–≤–∞–Ω –±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä–æ–≤ –¥–ª—è –ª—É—á—à–µ–≥–æ –∞–Ω–∞–ª–∏–∑–∞

### Language Model 
- **Qwen3-8B-Q4_K_M** - –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ KoboldCpp API

## üîß –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–µ—Ä–≤–∏—Å–∞

### Pipeline
```
–ó–∞–ø—Ä–æ—Å —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º ‚Üí CLIP —ç–Ω–∫–æ–¥–µ—Ä ‚Üí –ü–æ–∏—Å–∫ –±–ª–∏–∂–∞–π—à–µ–≥–æ –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä–∞ ‚Üí LLM ‚Üí –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–æ–ø—Ä–æ—Å–æ–≤

–í–æ–ø—Ä–æ—Å—ã + –û—Ç–≤–µ—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è + –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä ‚Üí LLM ‚Üí –î–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π –¥–∏–∞–≥–Ω–æ–∑ + —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
```

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
- –ï–¥–∏–Ω—ã–π endpoint `/analyze` –¥–ª—è –æ–±–æ–∏—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä–∞ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ base64-encoded –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

## üöÄ –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Python 3.8+
- KoboldCpp —Å–µ—Ä–≤–µ—Ä
- –í–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

1. **–°–æ–∑–¥–∞–Ω–∏–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è**
```bash
python -m venv venv
source venv/bin/activate  # Linux/Mac
# –∏–ª–∏
venv\Scripts\activate  # Windows
```

2. **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π**
```bash
pip install -r requirements.txt
```

3. **–ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞**
```bash
python src/app.py
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
```bash
python scripts/test_analyze.py --port 8022 --image_path scripts/data/image.png
```

## üì° API Endpoint

### –ó–∞–ø—Ä–æ—Å
```python
import requests
import base64

# –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
with open(image_path, "rb") as image_file:
    image_data = base64.b64encode(image_file.read()).decode('utf-8')

# –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–∞
url = f"http://{host}:{port}/analyze"
payload = {
    "image_data": image_data
}

response = requests.post(url, json=payload, timeout=30)
```

### –û—Ç–≤–µ—Ç—ã

**–°—Ü–µ–Ω–∞—Ä–∏–π 1: –ü–µ—Ä–≤–∏—á–Ω—ã–π –∞–Ω–∞–ª–∏–∑**
```json
{
    "questions": "1. –ö–æ–≥–¥–∞ –ø–æ—è–≤–∏–ª–∏—Å—å –≤—ã—Å—ã–ø–∞–Ω–∏—è –∏ –∫–∞–∫ –±—ã—Å—Ç—Ä–æ –æ–Ω–∏ —É–≤–µ–ª–∏—á–∏–≤–∞–ª–∏—Å—å?\n2. –ë—ã–ª–∏ –ª–∏ –∑—É–¥ –∏–ª–∏ –¥—Ä—É–≥–∏–µ –¥–∏—Å–∫–æ–º—Ñ–æ—Ä—Ç–Ω—ã–µ –æ—â—É—â–µ–Ω–∏—è?\n3. –ò–º–µ–ª–∏—Å—å –ª–∏ –∫–æ–Ω—Ç–∞–∫—Ç–Ω—ã–µ –∞–ª–ª–µ—Ä–≥–∏–∏?",
    "rash_description": "–ª–∏–Ω–µ–π–Ω—ã–µ –≤—ã—Å—ã–ø–∞–Ω–∏—è –ø–æ —Ö–æ–¥—É –Ω–µ—Ä–≤–Ω—ã—Ö —Å—Ç–≤–æ–ª–æ–≤"
}
```

**–°—Ü–µ–Ω–∞—Ä–∏–π 2: –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞**
```json
{
{'recommendations': 'üè• –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï –ê–ì–ï–ù–¢–ê\n\n–ù–∞ –æ—Å–Ω–æ–≤–µ –∞–Ω–∞–ª–∏–∑–∞: –ª–∏–Ω–µ–π–Ω—ã–µ –≤—ã—Å—ã–ø–∞–Ω–∏—è –ø–æ —Ö–æ–¥—É –Ω–µ—Ä–≤–Ω—ã—Ö —Å—Ç–≤–æ–ª–æ–≤\n\n–î–ò–ê–ì–ù–û–°–¢–ò–ß–ï–°–ö–ò–ï –ü–†–ï–î–ü–û–õ–û–ñ–ï–ù–ò–Ø:\n\n1. –ü—Å–æ—Ä–∏–∞–∑\n   ‚Ä¢ –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å: –Ω–∏–∑–∫–∞—è\n   ‚Ä¢ –û—Ç–ª–∏—á–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏: –°—ã–ø—å –Ω–µ –ø–æ —Ö–æ–¥—É –Ω–µ—Ä–≤–Ω—ã—Ö —Å—Ç–≤–æ–ª–æ–≤, –∞ –≤ –≤–∏–¥–µ –ø–∞–ø—É–ª –∏ —á–µ—à—É–µ–∫\n   ‚Ä¢ –ß—Ç–æ —É—Ç–æ—á–Ω–∏—Ç—å: –ù—É–∂–Ω–æ –≤—ã—è—Å–Ω–∏—Ç—å, –µ—Å—Ç—å –ª–∏ –Ω–∞–ª—ë—Ç—ã –Ω–∞ –ø–∞–ø—É–ª–∞—Ö, –Ω–∞–ª–∏—á–∏–µ –∫–µ—Ä–∞—Ç–æ—Ü–∏—Å—Ç–æ–≤\n   ‚Ä¢ –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞: –ö–æ–∂–Ω—ã–µ –ø—Ä–æ–±—ã, –±–∏–æ–ø—Å–∏—è\n\n2. –î–µ—Ä–º–∞—Ç–∏—Ç\n   ‚Ä¢ –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å: —Å—Ä–µ–¥–Ω—è—è\n   ‚Ä¢ –û—Ç–ª–∏—á–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏: –°—ã–ø—å –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ —Ö–æ–¥—É –Ω–µ—Ä–≤–Ω—ã—Ö —Å—Ç–≤–æ–ª–æ–≤, –Ω–æ –æ–±—ã—á–Ω–æ —Å–æ–ø—Ä–æ–≤–æ–∂–¥–∞–µ—Ç—Å—è –∑—É–¥–æ–º –∏ –ø–æ–∫—Ä–∞—Å–Ω–µ–Ω–∏–µ–º\n   ‚Ä¢ –ß—Ç–æ —É—Ç–æ—á–Ω–∏—Ç—å: –ù—É–∂–Ω–æ –≤—ã—è—Å–Ω–∏—Ç—å, –µ—Å—Ç—å –ª–∏ –∞–ª–ª–µ—Ä–≥–∏—á–µ—Å–∫–∏–µ —Ä–µ–∞–∫—Ü–∏–∏, –∫–æ–Ω—Ç–∞–∫—Ç —Å –∞–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–º–∏ –≤–µ—â–µ—Å—Ç–≤–∞–º–∏\n   ‚Ä¢ –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞: –ê–ª–ª–µ—Ä–≥–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã, –∫–æ–∂–Ω—ã–µ –ø—Ä–æ–±—ã\n\n3. –õ–∏–Ω–µ–π–Ω—ã–π –ª–∏—à–∞–π\n   ‚Ä¢ –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å: –≤—ã—Å–æ–∫–∞—è\n   ‚Ä¢ –û—Ç–ª–∏—á–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏: –°—ã–ø—å –ø–æ —Ö–æ–¥—É –Ω–µ—Ä–≤–Ω—ã—Ö —Å—Ç–≤–æ–ª–æ–≤, –∑—É–¥, –Ω–µ–æ–±—ã—á–Ω—ã–µ —Ñ–æ—Ä–º—ã –≤—ã—Å—ã–ø–∞–Ω–∏–π\n   ‚Ä¢ –ß—Ç–æ —É—Ç–æ—á–Ω–∏—Ç—å: –ù—É–∂–Ω–æ –≤—ã—è—Å–Ω–∏—Ç—å, –µ—Å—Ç—å –ª–∏ —Å–∏–º–ø—Ç–æ–º—ã –≤–µ–≥–µ—Ç–∞—Ç–∏–≤–Ω–æ–π –Ω–µ—Ä–≤–Ω–æ–π –¥–∏—Å—Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ–Ω—Ç–∞–∫—Ç —Å –∂–∏–≤–æ—Ç–Ω—ã–º–∏\n   ‚Ä¢ –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞: –û–±—â–∏–π –∞–Ω–∞–ª–∏–∑ –∫—Ä–æ–≤–∏, –±–∏–æ–ø—Å–∏—è –∫–æ–∂–∏\n\n4. –ü—Å–æ—Ä–∏–∞–∑\n   ‚Ä¢ –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å: –Ω–∏–∑–∫–∞—è\n   ‚Ä¢ –û—Ç–ª–∏—á–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏: –°—ã–ø—å –Ω–µ –ø–æ —Ö–æ–¥—É –Ω–µ—Ä–≤–Ω—ã—Ö —Å—Ç–≤–æ–ª–æ–≤, –∞ –≤ –≤–∏–¥–µ –ø–∞–ø—É–ª –∏ —á–µ—à—É–µ–∫\n   ‚Ä¢ –ß—Ç–æ —É—Ç–æ—á–Ω–∏—Ç—å: –ù—É–∂–Ω–æ –≤—ã—è—Å–Ω–∏—Ç—å, –µ—Å—Ç—å –ª–∏ –Ω–∞–ª—ë—Ç—ã –Ω–∞ –ø–∞–ø—É–ª–∞—Ö, –Ω–∞–ª–∏—á–∏–µ –∫–µ—Ä–∞—Ç–æ—Ü–∏—Å—Ç–æ–≤\n   ‚Ä¢ –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞: –ö–æ–∂–Ω—ã–µ –ø—Ä–æ–±—ã, –±–∏–æ–ø—Å–∏—è\n\n5. –î–µ—Ä–º–∞—Ç–∏—Ç\n   ‚Ä¢ –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å: —Å—Ä–µ–¥–Ω—è—è\n   ‚Ä¢ –û—Ç–ª–∏—á–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏: –°—ã–ø—å –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ —Ö–æ–¥—É –Ω–µ—Ä–≤–Ω—ã—Ö —Å—Ç–≤–æ–ª–æ–≤, –Ω–æ –æ–±—ã—á–Ω–æ —Å–æ–ø—Ä–æ–≤–æ–∂–¥–∞–µ—Ç—Å—è –∑—É–¥–æ–º –∏ –ø–æ–∫—Ä–∞—Å–Ω–µ–Ω–∏–µ–º\n   ‚Ä¢ –ß—Ç–æ —É—Ç–æ—á–Ω–∏—Ç—å: –ù—É–∂–Ω–æ –≤—ã—è—Å–Ω–∏—Ç—å, –µ—Å—Ç—å –ª–∏ –∞–ª–ª–µ—Ä–≥–∏—á–µ—Å–∫–∏–µ —Ä–µ–∞–∫—Ü–∏–∏, –∫–æ–Ω—Ç–∞–∫—Ç —Å –∞–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–º–∏ –≤–µ—â–µ—Å—Ç–≤–∞–º–∏\n   ‚Ä¢ –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞: –ê–ª–ª–µ—Ä–≥–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã, –∫–æ–∂–Ω—ã–µ –ø—Ä–æ–±—ã\n\n6. –õ–∏–Ω–µ–π–Ω—ã–π –ª–∏—à–∞–π\n   ‚Ä¢ –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å: –≤—ã—Å–æ–∫–∞—è\n   ‚Ä¢ –û—Ç–ª–∏—á–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏: –°—ã–ø—å –ø–æ —Ö–æ–¥—É –Ω–µ—Ä–≤–Ω—ã—Ö —Å—Ç–≤–æ–ª–æ–≤, –∑—É–¥, –Ω–µ–æ–±—ã—á–Ω—ã–µ —Ñ–æ—Ä–º—ã –≤—ã—Å—ã–ø–∞–Ω–∏–π\n   ‚Ä¢ –ß—Ç–æ —É—Ç–æ—á–Ω–∏—Ç—å: –ù—É–∂–Ω–æ –≤—ã—è—Å–Ω–∏—Ç—å, –µ—Å—Ç—å –ª–∏ —Å–∏–º–ø—Ç–æ–º—ã –≤–µ–≥–µ—Ç–∞—Ç–∏–≤–Ω–æ–π –Ω–µ—Ä–≤–Ω–æ–π –¥–∏—Å—Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ–Ω—Ç–∞–∫—Ç —Å –∂–∏–≤–æ—Ç–Ω—ã–º–∏\n   ‚Ä¢ –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞: –û–±—â–∏–π –∞–Ω–∞–ª–∏–∑ –∫—Ä–æ–≤–∏, –±–∏–æ–ø—Å–∏—è –∫–æ–∂–∏\n\n7. –õ–∏–Ω–µ–π–Ω—ã–π –ª–∏—à–∞–π\n   ‚Ä¢ –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å: –≤—ã—Å–æ–∫–∞—è\n   ‚Ä¢ –û—Ç–ª–∏—á–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏: —Ç—Ä–µ–±—É–µ—Ç –¥–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏\n   ‚Ä¢ –ß—Ç–æ —É—Ç–æ—á–Ω–∏—Ç—å: –¥–∏–Ω–∞–º–∏–∫–∞ —Å–∏–º–ø—Ç–æ–º–æ–≤, –æ—Ç–≤–µ—Ç –Ω–∞ –ª–µ—á–µ–Ω–∏–µ\n   ‚Ä¢ –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞: –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞, –±–∞–∑–æ–≤—ã–µ –∞–Ω–∞–ª–∏–∑—ã\n\nüìã –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò:\n‚Ä¢ –û–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ –≤—Ä–∞—á—É-–¥–µ—Ä–º–∞—Ç–æ–ª–æ–≥—É –¥–ª—è –æ—á–Ω–æ–≥–æ –æ—Å–º–æ—Ç—Ä–∞\n‚Ä¢ –ü—Ä–æ–π—Ç–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è\n‚Ä¢ –ù–µ –∑–∞–Ω–∏–º–∞—Ç—å—Å—è —Å–∞–º–æ–ª–µ—á–µ–Ω–∏–µ–º\n\n‚ö†Ô∏è –≠—Ç–æ –ø—Ä–µ–¥–ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∏–∞–≥–Ω–æ–∑—ã. –¢–æ—á–Ω—ã–π –¥–∏–∞–≥–Ω–æ–∑ –º–æ–∂–µ—Ç –ø–æ—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ –≤—Ä–∞—á –ø–æ—Å–ª–µ –ø–æ–ª–Ω–æ–≥–æ –æ–±—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è.'
}
```
